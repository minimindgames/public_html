var playServiceAchievements=[],achManager=achManager||{preloaded:!1,name:"achManager.",unlockAchievement:function(t){}},leadManager=leadManager||{name:"achManager.",updateScore:function(t){}},loginInProgress=!0,loadInProgress=!0,achManager_preloaded=!1,constants=constants||{};constants.CLIENT_ID="874864538494-k0csuugr190pmf99uhm1cr7jnstb0ecr.apps.googleusercontent.com",constants.ACH_FIRST_SUDOKU="CgkI_ub1j7sZEAIQAg",constants.ACH_SPRING_SEASON="CgkI_ub1j7sZEAIQAw",constants.ACH_SUMMER_SEASON="CgkI_ub1j7sZEAIQBA",constants.ACH_FALL_SEASON="CgkI_ub1j7sZEAIQCA",constants.ACH_FLAWLESS_SUDOKU="CgkI_ub1j7sZEAIQBQ",constants.ACH_MASTERFUL="CgkI_ub1j7sZEAIQBg",constants.LEAD_SUDOKU_MASTER="CgkI_ub1j7sZEAIQAQ",constants.LEAD_SUDOKU_SAKURA="CgkI_ub1j7sZEAIQBw";var playService={name:"playService.",achievements:[{id:constants.ACH_FIRST_SUDOKU,name:"First Sudoku",desc:"Solve the first Sudoku!",state:"REVEALED",claim:!1},{id:constants.ACH_FLAWLESS_SUDOKU,name:"Flawless Sudoku",desc:"Solve Sudoku without a Bug.",state:"REVEALED",claim:!1},{id:constants.ACH_MASTERFUL,name:"Tipless Sudoku",desc:"Solve Sudoku without a Tip.",state:"REVEALED",claim:!1},{id:constants.ACH_SPRING_SEASON,name:"Spring Season",desc:"Solve Sudokus of the Spring season!",state:"REVEALED",claim:!1},{id:constants.ACH_SUMMER_SEASON,name:"Summer Season",desc:"Solve Sudokus of the Summer season!",state:"REVEALED",claim:!1},{id:constants.ACH_FALL_SEASON,name:"Fall Season",desc:"Solve Sudokus of the Fall season!",state:"REVEALED",claim:!1}],loadAchievements:function(t){for(var e=0;e<t.length;e++){var i=this.getAchievement(t[e]);"UNLOCKED"!==i.state&&(i.state="UNLOCKED",achManager.preloaded&&achManager.unlockAchievement(t[e]))}},getAchievement:function(t){for(var e=0;e<this.achievements.length;e++)if(this.achievements[e].id===t)return this.achievements[e]},getAchievements:function(t,e){for(var i=[],s=0;s<this.achievements.length&&(this.achievements[s].state===t&&i.push({title:this.achievements[s].name,text:this.achievements[s].desc,id:this.achievements[s].id}),!(0<e&&i.length>=e));s++);return i},showAchievements:function(t){for(var e=[],i=0;i<this.achievements.length&&(this.achievements[i].claim&&(this.achievements[i].claim=!1,e.push({title:this.achievements[i].name,text:this.achievements[i].desc})),!(0<t&&e.length>=t));i++);return e},unlockAchievement:function(t){var e=this.getAchievement(t);"UNLOCKED"!==e.state&&(e.state="UNLOCKED",e.claim=!0,achManager.unlockAchievement(t),dataStorage.saveAchievements())},reset:function(){if(leadManager.reset&&leadManager.reset(),achManager.reset)for(var t=0;t<this.achievements.length;t++)achManager.reset(this.achievements[t].id);dataStorage.reset()},resize:function(t,e,i){var s=document.getElementById("login-buttons");s&&(s.style.left=Math.floor(t*i)+"px",s.style.top=Math.floor(e*i)+"px"),(s=document.getElementById("login-image"))&&(s.style.width=Math.floor(64*i)+"px",s.style.height=Math.floor(64*i)+"px")},showLogin:function(){var t;loadInProgress||(t=document.getElementById("login-buttons"))&&(t.style.display="block")},setScore:function(t){},updateScore:function(t){dataStorage.updateScore(t)},hide:function(){var t=document.getElementById("login-buttons");t&&(t.style.display="none")},updateAchievements:function(t){for(var e=!1,i=0;i<t.length;i++){var s=t[i],a=this.getAchievement(s.id);"UNLOCKED"===s.achievementState?a&&"UNLOCKED"!==a.state&&(a.state="UNLOCKED",e=!0):a&&"UNLOCKED"===a.state&&achManager.unlockAchievement(s.id)}e&&dataStorage.saveAchievements()},signedIn:function(){},claimAchievements:function(){for(var t=0;t<this.achievements.length;t++)this.achievements[t].claim&&(achManager.unlockAchievement(this.achievements[t].id),this.achievements[t].claim=!1)}};function copy(t){var e,i,s=Array.isArray(t)?[]:{};for(i in t)e=t[i],s[i]="object"==typeof e?copy(e):e;return s}function addText(t,e,i,s,a,h){s=this.game.add.text(0,0,t,{fill:"#"+s,fontWeight:"normal",font:dataStorage.fontContent},this.textGroup);return s.anchor.set(.5),s.dx=.5+e,s.dy=.5+i,s.size=Math.floor(a),s.x=s.dx*this.size.width,s.y=s.dy*this.size.height,h&&s.kill(),s}function addSpriteFromFile(t,e,i){t=this.create(0,0,t);return void 0===e&&(t.kill(),e=i=0),t.anchor.set(.5),t.dx=.5+e,t.dy=.5+i,t.x=t.dx*this.size.width,t.y=t.dy*this.size.height,t}function addSprite(t,e,i,s,a){return a=a||this,t=dataStorage.debug?a.create(0,0,t):a.create(0,0,s,t),a&&(t.noscale=!0),t.anchor.set(.5),void 0===e&&(t.kill(),e=i=0),t.dx=.5+e,t.dy=.5+i,t.x=t.dx*this.size.width,t.y=t.dy*this.size.height,t}function makeSprite(t,e,i,s){return dataStorage.debug?t.make.sprite(i,s,e):t.make.sprite(i,s,"atlas",e)}function lockInputbak(t){t=t||500,this.inputLockTime=this.time.now+t}function handleInputWidgetbak(){var e;return this.inputWidget?(hideInputWidget(this),!0):(this.game.input.activePointer.targetObject&&(e=this).inputWidgets.forEach(function(t){t.input()&&e.showInputWidget(t)}),null!==this.inputWidget)}function dimmOverlaybak(t){var e=window.dimmGraphics;if(e){if(e.width===window.innerWidth&&e.height===window.innerHeight)return}else e=window.dimmGraphics=t.make.graphics(0,0);return e.clear(),e.beginFill(0),e.drawRect(0,0,window.innerWidth,window.innerHeight),e.endFill(),e}function onResize(t,e){0===e.width&&(e.width=480),0===e.height&&(e.height=480);var i=e.width,s=e.height;this.width===i&&this.height,this.width=i;var a=(this.height=s)<=i,h=0,o=0;this.headerGroup&&(this.headerGroup.size=a?this.headerGroup.landSize:this.headerGroup.portSize,h+=this.headerGroup.size.width,o+=this.headerGroup.size.height),this.boardGroup&&(this.boardGroup.size=a?this.boardGroup.landSize:this.boardGroup.portSize,h+=this.boardGroup.size.width,o+=this.boardGroup.size.height),this.controlGroup&&(this.controlGroup.size=a?this.controlGroup.landSize:this.controlGroup.portSize,h+=this.controlGroup.size.width,o+=this.controlGroup.size.height);var r=i/h,n=s/o,d=Math.min(r,n);1<d&&(d=1);e=0,h=0,o=this.bgGroup;return o&&o.resize(d,e,h,i-e,s-h),(o=this.headerGroup)&&(o.resize(d,e,h,i-e,s-h),e+=o.size.width*o.scale.x,h+=o.size.height*o.scale.y),(o=this.boardGroup)&&(n=r=0,this.controlGroup&&(r=this.controlGroup.size.width*d,n=this.controlGroup.size.height*d),o.resize(d,e,h,i-e-r,s-h-n),a?e+=o.size.width*o.scale.x:h+=o.size.height*o.scale.y),(o=this.controlGroup)&&o.resize(d,e,h,i-e,s-h),(o=this.popupGroup)&&o.resize(d,0,0,i,s),(o=this.effectGroup)&&o.resize(d,0,0,i,s),(o=this.tutorialGroup)&&o.resize(d,0,0,i,s),d}function fadeOutEffect(t){playService.hide();var e=t.game.add.graphics(0,0);t.world.remove(e),e.beginFill(2,0,1);var i=t.game.width,s=t.game.height,a=Math.max(i,s),h={step:a};e.drawCircle(i/2,s/2,h.step);a=t.game.add.tween(h).to({step:0},500,Phaser.Easing.Quadratic.InOut,!0).onUpdateCallback(function(){e.clear(),e.beginFill(2,0,1),e.drawCircle(i/2,s/2,h.step)},this);return t.world.mask=e,a}function addPointer(t,e,i){t.add.sprite(e,i,"atlas","sudokugarden-play.png").anchor.set(.5)}function formatTime(t){var e=Math.floor(t/60);return e+":"+("0"+(t-60*e)).substr(-2)}var dataStorage={URL:"http://gamequack.com/duckling-games/",title:"Duckling Games",name:"duckling-games-",fontContent:"Source Serif Pro",fontHeader:"Source Code Pro",debug:!(String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)}),isAudio:!0,score:0,scoreUp:0,scoreWorld1:3,scoreWorld2:6,scoreWorld3:12,scoreMax:21,musicPlaying:null,init:function(){if("undefined"!=typeof Storage)try{var t=localStorage.getItem("audio");null!==t&&"null"!==t&&(this.isAudio="on"===t),null===(t=localStorage.getItem(this.name+"score"))||"null"===t||(t=parseInt(t))>this.score&&(this.score=t)}catch(t){}},setAudio:function(t){if(!(this.isAudio=t)&&this.musicPlaying&&this.musicPlaying.fadeOut(),"undefined"!=typeof Storage)try{localStorage.setItem("audio",t?"on":"off")}catch(t){}},reset:function(){if(console.log("reset dataStorage"),"undefined"!=typeof Storage)try{localStorage.removeItem(this.name+"score"),localStorage.removeItem(this.name+"achievements")}catch(t){}},setScore:function(t){if(this.score=t,playService.setScore(t),"undefined"!=typeof Storage)try{localStorage.setItem(this.name+"score",t)}catch(t){}},updateScore:function(t){if(t>this.score){if(this.score=t,"undefined"!=typeof Storage)try{localStorage.setItem(this.name+"score",t)}catch(t){}mainState.updateScore(t)}else t<this.score&&playService.setScore(this.score)},saveAchievements:function(){}};dataStorage.init(),EffectGroup=function(t,e,i){Phaser.Group.call(this,t),this.landSize=e,this.portSize=i,this.size=t.width>t.height?this.landSize:this.portSize,this.textGroup=this.game.add.group(),this.spriteAtlas="atlas"},EffectGroup.prototype=Object.create(Phaser.Group.prototype),EffectGroup.prototype.constructor=EffectGroup,EffectGroup.prototype.addText=function(t,e,i,s,a,h){return addText.call(this,t,e,i,s,a,h)},EffectGroup.prototype.addSpriteFromFile=function(t,e,i){return addSpriteFromFile.call(this,t,e,i)},EffectGroup.prototype.addSprite=function(t,e,i){return addSprite.call(this,t,e,i,this.spriteAtlas)},EffectGroup.prototype.setTexture=function(t,e){dataStorage.debug?t.loadTexture(e):t.frameName=e},EffectGroup.prototype.resize=function(t,e,i,s,a){this.scale.set(t)},EffectGroup.prototype.move=function(t,e,i){t.dx=.5+e,t.dy=.5+i,t.x=t.dx*this.size.width,t.y=t.dy*this.size.height},EffectGroup.prototype.moveTo=function(t,e){t.dx=e.dx,t.dy=e.dy,t.x=t.dx*this.size.width,t.y=t.dy*this.size.height},EffectGroup.prototype.enable=function(t){var e;"sparkle"===t&&((e=this.sparkle=this.game.add.emitter(0,0,15)).makeParticles(["atlas"],["effect-star.png"]),e.setRotation(0,0),e.gravity=0,e.minRotation=-90,e.maxRotation=90,e.setAlpha(1,0,1750,Phaser.Easing.Quadratic.InOut),this.add(e)),"leaf"===t&&((e=this.leaf=this.game.add.emitter(this.game.world.centerX,this.game.world.centerY,10)).makeParticles(["atlas"],["effect-leaf.png"]),this.add(e)),"snowflake.png"===t&&((e=this.leaf=this.game.add.emitter(this.game.world.centerX,this.game.world.centerY,10)).makeParticles(["atlas"],["effect-snowflake.png"]),this.add(e)),"snowing"===t&&(e=this.snowing=this.game.add.emitter(this.game.world.centerX,-32,300),this.add(e))},EffectGroup.prototype.start=function(t,e,i,s){var a;this.snowing?(a=this.snowing,this.rain?(a.makeParticles(["atlas"],["effect-rain-drop.png"]),a.maxRotation=0,a.setYSpeed(200,300),a.setXSpeed(-5,5)):(a.makeParticles(["atlas"],["effect-snowflake-1.png","effect-snowflake-2.png","effect-snowflake-3.png"]),a.setYSpeed(40,100),a.maxRotation=40),a.maxParticleScale=1,a.minParticleScale=.5,a.gravity=0,a.width=i,a.minRotation=0,a.start(!1,2e4,500)):this.leaf?((a=this.leaf).x=t/this.scale.x,a.width=i,a.height=s,a.y=e/this.scale.y,a.start(!1,5e3,1450,0)):((a=this.sparkle).width=i,a.height=s,a.x=t/this.scale.x,a.y=e/this.scale.y,a.flow(1750,50,1,15))},PopupGroup=function(t,e){this.size=e,Phaser.Group.call(this,t),this.textGroup=this.game.add.group(),this.visible=!1,this.textGroup.visible=!1},PopupGroup.prototype=Object.create(Phaser.Group.prototype),PopupGroup.prototype.constructor=PopupGroup,PopupGroup.prototype.addText=function(t,e,i,s,a){return addText.call(this,t,e,i,s,a)},PopupGroup.prototype.addSpriteFromFile=function(t,e,i){return addSpriteFromFile.call(this,t,e,i)},PopupGroup.prototype.addSprite=function(t,e,i){return addSprite.call(this,t,e,i,"atlas")},PopupGroup.prototype.resize=function(t,e,i,s,a){this.width=s,this.height=a,this.scale.set(t),this.dim.width=s,this.dim.height=a,this.banner&&(this.banner.x=s/2/t,this.banner.y=a/2/t,e=2*s/4/t+200*t,i=a/2/t-.9*this.banner.height,this.quackSad&&(this.quackSad.x=e,this.quackSad.y=i),this.shade&&(this.shade.x=e,this.shade.y=i),this.quack.x=e,this.quack.y=i,this.bannerText.x=s/2,this.bannerText.y=a/2,this.bannerText.fontSize=32*t,this.bannerText.wordWrapWidth=500*t),this.dialogBg&&(this.dialogBg.x=s/2/this.scale.x,this.dialogBg.y=a/2/this.scale.y,this.dialogTitle.x=s/2,this.dialogTitle.y=this.game.height/2-250*this.scale.y,this.dialogTitle.fontSize=this.dialogTitle.baseFontSize*t,this.dialogText.x=s/2,this.dialogText.y=this.game.height/2-150*this.scale.y,this.dialogText.fontSize=32*t,this.dialogText.wordWrapWidth=500*t,this.dialogTip.x=this.dialogText.x,this.dialogTip.y=this.dialogText.y+370*this.scale.y,this.dialogTip.fontSize=28*t,this.dialogTip.wordWrapWidth=500*t)},PopupGroup.prototype.enable=function(t){var e,i,s,a,h,o,r;this.dim||(this.dim=makeSprite(this.game,"popup-dim.png"),this.game.world.add(this.dim),this.dim.alpha=.5,this.dim.kill()),"popup-kid.png"===t&&(h=this.banner=this.addSprite("popup-banner.png"),(h=this.quack=this.addSprite("quack-kid.png")).scale.set(.5),o={fill:"#000000",align:"center",fontWeight:"normal",font:dataStorage.fontContent},(r=this.bannerText=this.game.add.text(0,0,"",o)).kill(),r.anchor.set(.5),r.wordWrap=!0,this.textGroup.add(r)),"popup-banner.png"!==t&&"popup-gauge.png"!==t||((h=this.shade=this.addSpriteFromFile("quack.png")).frame=1,h.scale.set(.5),h=this.banner=this.addSprite("popup-banner.png"),(h=this.quack=this.addSpriteFromFile("quack.png")).scale.set(.5),(h=this.quackSad=this.addSprite("quack-sad.png")).scale.set(.5),o={fill:"#000000",align:"center",fontWeight:"normal",font:dataStorage.fontContent},(r=this.bannerText=this.game.add.text(0,0,"",o)).kill(),r.anchor.set(.5),r.wordWrap=!0,this.textGroup.add(r),"popup-gauge.png"===t&&((e=this.gaugeBg=makeSprite(this.game,"popup-gauge.png",0,16)).anchor.set(.5),this.banner.addChild(e),a=2*dataStorage.scoreMax,(s=this.game.make.bitmapData(5*a,32)).smoothed=!1,s.clear(),(i=s.ctx.createLinearGradient(0,0,s.width,s.height)).addColorStop(0,"#00ff00"),i.addColorStop(.5,"#ffff00"),i.addColorStop(1,"#ff0000"),s.ctx.fillStyle=i,s.ctx.fillRect(0,0,5*a,32),this.game.cache.removeBitmapData("bmd-gauge"),this.game.cache.addBitmapData("bmd-gauge",s),(s=this.gauge=this.game.make.sprite(0,0,this.game.cache.getBitmapData("bmd-gauge"))).anchor.set(.5),s.loadTexture(this.game.cache.getBitmapData("bmd-gauge")),this.gaugeBg.addChild(s),a=5*-a/2,dataStorage.score<15?a+=7.5*dataStorage.score:dataStorage.score<30?(a+=112.5,a+=5*(dataStorage.score-15)):(a+=112.5,a+=75,a+=2.5*(dataStorage.score-30)),(a=this.gaugePointer=this.game.make.sprite(a,0,"atlas","popup-gauge-pointer.png")).anchor.set(.5),s.addChild(a),e.kill())),"popup-dialog.png"!==t&&"popup-dialog-quit.png"!==t||((h=this.dialogBg=this.addSprite("popup-dialog-bg.png")).inputEnabled=!0,h.input.useHandCursor=!1,o={fill:"#83472e",align:"left",fontWeight:"bold",font:dataStorage.fontHeader},(r=this.dialogTitle=this.game.add.text(0,0,dataStorage.title,o)).baseFontSize=44,r.kill(),r.anchor.set(.5,0),r.wordWrap=!1,this.textGroup.add(r),o={fill:"#83472e",align:"left",fontWeight:"normal",font:dataStorage.fontContent},(r=this.dialogText=this.game.add.text(0,0,"",o)).kill(),r.anchor.set(.5,0),r.wordWrap=!0,this.textGroup.add(r),(r=this.dialogTip=this.game.add.text(0,0,"",o)).kill(),r.anchor.set(.5),r.wordWrap=!0,this.textGroup.add(r),this.play=makeSprite(this.game,"popup-dialog-play.png"),this.play.inputEnabled=!0,this.play.input.useHandCursor=!0,this.play.input.priorityID=1,this.play.anchor.set(.5),h.addChild(this.play),this.claim=makeSprite(this.game,"popup-dialog-claim.png"),this.claim.inputEnabled=!0,this.claim.input.useHandCursor=!0,this.claim.input.priorityID=1,this.claim.anchor.set(.5),this.claim.kill(),this.claim.y=200,h.addChild(this.claim),"popup-dialog-quit.png"===t&&(this.quit=makeSprite(this.game,"popup-dialog-quit.png"),this.quit.inputEnabled=!0,this.quit.input.useHandCursor=!0,this.quit.anchor.set(.5),this.quit.input.priorityID=1,this.quit.y=100,h.addChild(this.quit),this.play.kill()),this.close=makeSprite(this.game,"popup-dialog-close.png"),this.close.inputEnabled=!0,this.close.input.useHandCursor=!0,this.close.input.priorityID=1,this.close.x=200,this.close.y=-250,h.addChild(this.close),this.achievementIcon=makeSprite(this.game,"popup-achievement-icon.png",115,80),this.dialogBg.addChild(this.achievementIcon),this.achievementIcon.kill())},PopupGroup.prototype.enableGauge=function(t,e,i){this.gaugeEnabled=t},PopupGroup.prototype.gaugeX=function(){var t=dataStorage.score,e=dataStorage.scoreMax;var i=5*e*2,s=Math.log(1)/Math.log(10),t=Math.log(e)/Math.log(10)-s,i=(Math.log(46)/Math.log(10)-s)/t*i;return i-=5*e,alert(i),i},PopupGroup.prototype.showBanner=function(t,e,i,s){var a;this.visible||this.hideTimeout?this.hide():(this.visible=!0,this.textGroup.visible=!0,this.shade&&this.shade.revive(),this.dim.revive(),this.bannerText.revive(),(a=s?this.quackSad:this.quack).revive(),this.banner.revive(),this.game.world.bringToTop(this),this.game.world.bringToTop(this.textGroup),this.hideCallback=i,this.bannerText.text=t,this.shade&&(this.shade.y=-this.banner.height/2-.9*this.banner.height),a.y=-this.banner.height/2-.9*this.banner.height,this.banner.y=-this.banner.height/2,this.gaugeBg&&(this.gaugeEnabled?this.gaugeBg.revive():this.gaugeBg.kill()),this.bannerText.y=this.banner.y*this.scale.y,i=(s=this.game.height)/2/this.scale.y-.9*this.banner.height,t=s/2/this.scale.y,s/=2,this.shade&&this.game.add.tween(this.shade).to({y:i},600,Phaser.Easing.Back.Out,!0),this.game.add.tween(a).to({y:i},600,Phaser.Easing.Back.Out,!0),this.game.add.tween(this.banner).to({y:t},600,Phaser.Easing.Back.Out,!0),this.game.add.tween(this.bannerText).to({y:s},600,Phaser.Easing.Back.Out,!0),e&&(this.hideTimeout=this.game.time.events.add(e,function(){this.hideBanner()},this)),this.game.physics&&this.game.physics.arcade&&(this.game.physics.arcade.isPaused=!0))},PopupGroup.prototype.hideBanner=function(){this.hideTimeout&&this.game.time.events.remove(this.hideTimeout),this.hideTimeout=null;var t,e=this.game.height,i=e/this.scale.y+.9*this.banner.height,e=e/this.scale.y+2*this.banner.height*.9;this.shade&&this.game.add.tween(this.shade).to({y:i},500,Phaser.Easing.Back.In,!0),t=this.quack.visible?this.quack:this.quackSad,this.game.add.tween(t).to({y:i},500,Phaser.Easing.Back.In,!0),this.game.add.tween(this.banner).to({y:e},500,Phaser.Easing.Back.In,!0);e*=this.scale.y;this.game.add.tween(this.bannerText).to({y:e},500,Phaser.Easing.Back.In,!0).onComplete.addOnce(function(){this.visible=!1,this.textGroup.visible=!1,this.shade&&this.shade.kill(),this.dim.kill(),this.bannerText.kill(),t.kill(),this.banner.kill(),this.hideCallback&&this.hideCallback.popupHidden.call(this.hideCallback)},this),this.game.physics&&this.game.physics.arcade&&(this.game.physics.arcade.isPaused=!1)},PopupGroup.prototype.showDialog=function(t,e,i,s,a,h,o){this.visible||this.hideTimeout?this.hide():(this.visible=!0,this.textGroup.visible=!0,this.play.revive(),this.claim.kill(),h?(this.dialogTitle.text=h,this.achievementIcon.revive(),o&&(this.claim.revive(),this.play.kill())):(this.dialogTitle.text=dataStorage.title,this.achievementIcon.kill()),this.dim.revive(),this.game.world.bringToTop(this),this.game.world.bringToTop(this.textGroup),this.quit&&(a?this.quit.revive():this.quit.kill()),this.dialogBg.revive(),this.dialogText.text=t,this.dialogText.revive(),this.dialogTitle.revive(),e&&(this.dialogTip.text=e,this.dialogTip.revive()),this.hideCallback=i,a=this.game.width/this.scale.x,t=this.game.height/this.scale.y,i=-this.dialogBg.width/2,this.dialogBg.x=i,this.dialogBg.y=t/2,this.play.y="ACHIEVEMENT"!==e?200:0,this.dialogTitle.x=i*this.scale.x,this.dialogTitle.y=this.game.height/2-250*this.scale.y,this.dialogText.x=i*this.scale.x,this.dialogText.y=this.game.height/2-150*this.scale.y,this.dialogText.wordWrapWidth=500*this.scale.y,this.dialogTip.x=this.dialogText.x,this.dialogTip.y=this.dialogText.y+370*this.scale.y,this.dialogTip.wordWrapWidth=500*this.scale.y,i=s?600:1,a/=2,this.game.add.tween(this.dialogBg).to({x:a},i,Phaser.Easing.Back.Out,!0),this.game.add.tween(this.dialogTitle).to({x:a*this.scale.x},i,Phaser.Easing.Back.Out,!0),this.game.add.tween(this.dialogText).to({x:a*this.scale.x},i,Phaser.Easing.Back.Out,!0),this.game.add.tween(this.dialogTip).to({x:a*this.scale.x},i,Phaser.Easing.Back.Out,!0),this.game.physics&&this.game.physics.arcade&&(this.game.physics.arcade.isPaused=!0))},PopupGroup.prototype.hideDialog=function(){this.hideTimeout&&this.game.time.events.remove(this.hideTimeout),this.hideTimeout=null;var t=-this.dialogBg.width/2;this.game.add.tween(this.dialogTitle).to({x:t*this.scale.x},500,Phaser.Easing.Back.In,!0),this.game.add.tween(this.dialogText).to({x:t*this.scale.x},500,Phaser.Easing.Back.In,!0),this.game.add.tween(this.dialogTip).to({x:t*this.scale.x},500,Phaser.Easing.Back.In,!0),this.game.add.tween(this.dialogBg).to({x:t},500,Phaser.Easing.Back.In,!0).onComplete.addOnce(function(){this.visible=!1,this.textGroup.visible=!1,this.dim.kill(),this.dialogBg.kill(),this.dialogTitle.kill(),this.dialogText.kill(),this.dialogTip.kill(),this.achievementIcon.kill()},this),this.hideCallback&&this.hideCallback.popupHidden.call(this.hideCallback),this.game.physics&&this.game.physics.arcade&&(this.game.physics.arcade.isPaused=!1)},PopupGroup.prototype.hide=function(){this.banner&&this.banner.visible?this.hideBanner():this.dialogBg&&this.dialogBg.visible&&this.hideDialog()},TutorialGroup=function(t,e){this.size=e,Phaser.Group.call(this,t),this.textGroup=this.game.add.group(),this.visible=!1,this.textGroup.visible=!1},TutorialGroup.prototype=Object.create(Phaser.Group.prototype),TutorialGroup.prototype.constructor=TutorialGroup,TutorialGroup.prototype.addText=function(t,e,i,s,a){return addText.call(this,t,e,i,s,a)},TutorialGroup.prototype.addSpriteFromFile=function(t,e,i){return addSpriteFromFile.call(this,t,e,i)},TutorialGroup.prototype.addSprite=function(t,e,i){return addSprite.call(this,t,e,i,"atlas")},TutorialGroup.prototype.resize=function(t,e,i,s,a){this.width=s,this.height=a,this.scale.set(t),this.dim&&(this.dim.width=s,this.dim.height=a/4),this.targetSprite&&this.handPosition()},TutorialGroup.prototype.enable=function(t){this.dim||(this.dim=makeSprite(this.game,"popup-dim.png"),this.game.world.add(this.dim),this.dim.alpha=.75,this.dim.kill());this.hand=this.addSprite("popup-hand.png",0,0);var e={fill:"#ffffff",align:"center",font:dataStorage.fontContent},e=this.handText=this.game.add.text(0,0,"",e);e.anchor.set(.5),e.wordWrap=!0,this.textGroup.add(e)},TutorialGroup.prototype.handPosition=function(){this.game.world.bringToTop(this),this.handText.x=this.game.width/2,this.handText.y=this.game.height/8,this.handText.fontSize=32*this.scale.x,this.handText.wordWrapWidth=400*this.scale.x;var t=this.targetSprite,e=this.targetGroup;this.hand.x=e.centerX(t)-this.hand.width/2*this.scale.x,this.hand.y=e.centerY(t),this.hand.x/=this.scale.x,this.hand.y/=this.scale.y},TutorialGroup.prototype.pointHand=function(t,e,i){this.visible=!0,this.hand.revive(),this.targetSprite=t,this.targetGroup=e,this.handPosition(),this.game.time.events.add(i,function(){this.hide()},this)},TutorialGroup.prototype.showHand=function(t,e,i){this.visible=!0,this.textGroup.visible=!0,this.step=1,this.dim.revive(),this.hand.revive(),this.targetSprite=e,this.targetGroup=i,this.handPosition(),this.handText.text=t,this.game.world.bringToTop(this.textGroup),this.handText.bringToTop(),this.game.physics&&this.game.physics.arcade&&(this.game.physics.arcade.isPaused=!0)},TutorialGroup.prototype.hideHand=function(){this.hideTimeout&&this.game.time.events.remove(this.hideTimeout),this.visible=!1,this.textGroup.visible=!1,this.dim.kill(),this.game.physics&&this.game.physics.arcade&&(this.game.physics.arcade.isPaused=!1)},TutorialGroup.prototype.hide=function(){this.hideHand()},TutorialGroup.prototype.nextStep=function(t,e,i){var s;this.step++,this.handText.text=t,void 0!==e&&(s=i.centerX(e)-this.hand.width/2*this.scale.x,t=i.centerY(e),s/=this.scale.x,t/=this.scale.y,this.targetSprite=e,this.targetGroup=i,this.game.add.tween(this.hand).to({x:s,y:t},750,Phaser.Easing.Back.InOut,!0).onComplete.add(function(){},this))},TutorialGroup.prototype.handTarget=function(){return this.targetSprite},BgGroup=function(t){Phaser.Group.call(this,t),this.textGroup=this.game.add.group(),this.spriteAtlas="atlas",this.size={width:t.width,height:t.height}},BgGroup.prototype=Object.create(Phaser.Group.prototype),BgGroup.prototype.constructor=BgGroup,BgGroup.prototype.addText=function(t,e,i,s,a,h){return addText.call(this,t,e,i,s,a,h)},BgGroup.prototype.addSpriteFromFile=function(t,e,i){return addSpriteFromFile.call(this,t,e,i)},BgGroup.prototype.addSprite=function(t,e,i){return addSprite.call(this,t,e,i,this.spriteAtlas)},BgGroup.prototype.setTexture=function(t,e){dataStorage.debug?t.loadTexture(e):t.frameName=e},BgGroup.prototype.resize=function(e,t,i,s,a){this.scale.set(e),this.size.width=s,this.size.height=a;var h=s,o=a;this.children.forEach(function(t){"cache/atlas/bg-top.png"===t.frameName?(t.x=s/2/e,t.y=t.height/2,t.width=Math.floor(s/e),this.topY=t.height):"cache/atlas/bg-top-below.png"===t.frameName?(t.x=s/2/e,t.y=this.topY+t.height/2):"cache/atlas/bg-grass.png"===t.frameName?(t.x=s/2/e,t.y=o*e-t.height,t.width=Math.floor(s/e),this.bottomY=t.height):"cache/atlas/bg-bottom-above.png"===t.frameName?(t.x=s/2/e,t.y=o/e-this.bottomY-t.height/2):(1===t.dx?t.x=h*t.dx/e-t.width/2:t.x=h/2/e,1!==t.dy?t.y=o*t.dy/e:t.y=o/e-t.height/2)},this)},BoardGroup=function(t,e,i){Phaser.Group.call(this,t),this.landSize=e,this.portSize=i,this.size=t.width>t.height?this.landSize:this.portSize,this.textGroup=this.game.add.group(),this.spriteAtlas="atlas"},BoardGroup.prototype=Object.create(Phaser.Group.prototype),BoardGroup.prototype.constructor=BoardGroup,BoardGroup.prototype.addText=function(t,e,i,s,a,h){return addText.call(this,t,e,i,s,a,h)},BoardGroup.prototype.addSpriteFromFile=function(t,e,i){return addSpriteFromFile.call(this,t,e,i)},BoardGroup.prototype.addSprite=function(t,e,i,s){var a=this;return s&&(a=this.textGroup),addSprite.call(this,t,e,i,this.spriteAtlas,a)},BoardGroup.prototype.addBitmap=function(t,e,i){t=this.create(0,0,t);return void 0===e&&(t.kill(),e=i=0),t.anchor.set(.5),t.dx=.5+e,t.dy=.5+i,t.x=t.dx*this.size.width,t.y=t.dy*this.size.height,t},BoardGroup.prototype.setTexture=function(t,e){dataStorage.debug?t.loadTexture(e):t.frameName=e},BoardGroup.prototype.resize=function(i,t,e,s,a){this.scale.set(i);var h=this.size.width,o=this.size.height;this.textGroup.x=this.x=(s-h*i)/2+t,this.textGroup.y=this.y=(a-o*i)/2+e,this.children.forEach(function(t){t.x=t.dx*h,t.y=t.dy*o},this),this.textGroup.forEach(function(t){var e=i;t.x=t.dx*h*e,t.y=t.dy*o*e,t.fontSize=Math.floor(t.size*e)+"px"},this),this.worldX=this.x+this.size.width/2*i,this.worldY=this.y+this.size.height/2*i},BoardGroup.prototype.getCenterX=function(t){return this.x+t.dx*this.size.width*this.scale.x},BoardGroup.prototype.getCenterY=function(t){return this.y+t.dy*this.size.height*this.scale.y},BoardGroup.prototype.move=function(t,e,i){t.dx=.5+e,t.dy=.5+i,t.x=t.dx*this.size.width,t.y=t.dy*this.size.height},BoardGroup.prototype.moveTo=function(t,e){t.dx=e.dx,t.dy=e.dy,t.x=t.dx*this.size.width,t.y=t.dy*this.size.height},BoardGroup.prototype.xy=function(t,e){return{x:t*this.size.width,y:e*this.size.height}},ControlGroup=function(t,e,i,s){Phaser.Group.call(this,t),this.landSize=e,this.portSize=i,this.smallScreen=s,this.size=t.width>t.height?this.landSize:this.portSize,this.textGroup=this.game.add.group(),this.spriteAtlas="atlas"},ControlGroup.prototype=Object.create(Phaser.Group.prototype),ControlGroup.prototype.constructor=ControlGroup,ControlGroup.prototype.addText=function(t,e,i,s,a,h){return addText.call(this,t,e,i,s,a,h)},ControlGroup.prototype.addSpriteFromFile=function(t,e,i){return addSpriteFromFile.call(this,t,e,i)},ControlGroup.prototype.addSprite=function(t,e,i){return addSprite.call(this,t,e,i,this.spriteAtlas)},ControlGroup.prototype.setTexture=function(t,e){dataStorage.debug?t.loadTexture(e):t.frameName=e},ControlGroup.prototype.resize=function(e,t,i,s,a){this.scale.set(e);var h,o,r,n=this.size.width,d=this.size.height,p=0,l=0;this.textGroup.x=this.x=(s-n*e)/2+t,this.textGroup.y=this.y=(a-d*e)/2+i,this.size===this.landSize?(r=this.smallScreen?2:3,h=this.smallScreen?-40:-75,o=100*-(4-r),this.children.forEach(function(t){t.noScale||(t.x=t.dx*n+h,t.y=t.dy*d+o,h+=95,r<=++p&&(p=0,l++,h=this.smallScreen?-40:-75,o+=100,this.smallScreen||3!==l||(h+=47.5,o-=400)),5===l&&(o-=600,h+=47.5)),t.numberSprite&&(t.numberSprite.x=this.getCenterX(t),t.numberSprite.y=this.getCenterY(t))},this)):(r=this.smallScreen?5:3,h=this.smallScreen?-200:-100,o=this.smallScreen?-40:-80,this.children.forEach(function(t){t.x=t.dx*n+h,t.y=t.dy*d+o,h+=95,r<=++p?(p=0,l++,h=this.smallScreen?-200:-100,o+=95,this.smallScreen||3!==l||(h-=95,o-=237.5)):this.smallScreen||3!==l||(h-=95,o+=95),this.smallScreen&&2===l&&(h-=95,o-=142.5),t.numberSprite&&(t.numberSprite.x=this.getCenterX(t),t.numberSprite.y=this.getCenterY(t))},this)),this.textGroup.forEach(function(t){t.x=t.dx*n*e,t.y=t.dy*d*e,t.fontSize=Math.floor(t.size*e)+"px"},this)},ControlGroup.prototype.move=function(t,e,i){t.dx=.5+e,t.dy=.5+i,t.x=t.dx*this.size.width,t.y=t.dy*this.size.height},ControlGroup.prototype.getCenterX=function(t){return this.x+t.x*this.scale.x},ControlGroup.prototype.getCenterY=function(t){return this.y+t.y*this.scale.y},HeaderGroup=function(t,e,i){Phaser.Group.call(this,t),this.landSize=e,this.portSize=i,this.size=t.width>t.height?this.landSize:this.portSize,this.textGroup=this.game.add.group()},HeaderGroup.prototype=Object.create(Phaser.Group.prototype),HeaderGroup.prototype.constructor=HeaderGroup,HeaderGroup.prototype.addText=function(t,e,i,s,a){return addText.call(this,t,e,i,s,a)},HeaderGroup.prototype.addSprite=function(t,e,i){return addSprite.call(this,t,e,i,"atlas")},HeaderGroup.prototype.setTexture=function(t,e){dataStorage.debug?t.loadTexture(e):t.frameName=e},HeaderGroup.prototype.resize=function(t,e,i,s,a){var h,o;t<.5&&(t=.5),this.scale.set(t);var r=10*t;if(this.option&&(h=this.option.width,o=this.option.height,this.size===this.landSize?(this.optionBg.x=this.option.x=h/2+r,this.optionBg.y=this.option.y=a/t-o/2-r,this.optionSound.x=120,this.optionSound.y=-100,this.optionFullscreen.x=50,this.optionFullscreen.y=-150,this.optionReset.x=170,this.optionReset.y=-0,this.optionHelp.x=155,this.optionHelp.y=-25,playService.resize(this.option.x-h/2,o+2*r,t),this.info&&(this.info.x=this.option.x,this.info.y=this.option.y-o-2*r)):(this.optionBg.x=this.option.x=s/t-h/2-r,this.optionBg.y=this.option.y=o/2+r,this.optionSound.x=-120,this.optionSound.y=100,this.optionFullscreen.x=-155,this.optionFullscreen.y=25,this.optionReset.x=0,this.optionReset.y=165,this.optionHelp.x=-45,this.optionHelp.y=150,playService.resize(h+3*r,this.option.y-o/2,t),this.info&&(this.info.x=this.option.x-h-2*r,this.info.y=this.option.y))),this.exit&&(o=(h=("score"===this.scoreTime&&(this.size,this.landSize),this.exit.width),this.exit.height),this.exit.x=h/2+r,this.exit.y=o/2+r),this.score&&(h=this.score.width,o=this.score.height,this.size===this.landSize?(this.score.frameName!=="header-"+this.scoreTime+"-land.png"&&this.setTexture(this.score,"header-"+this.scoreTime+"-land.png"),this.score.x=this.score.width/2+r/2,this.exit,this.score.y=a/2/t,this.scoreLabel.x=this.score.x*t,this.scoreLabel.y=(this.score.y+24)*t):(this.score.frameName!=="header-"+this.scoreTime+"-port.png"&&this.setTexture(this.score,"header-"+this.scoreTime+"-port.png"),this.score.x=s/2/t,this.score.y=o/2+r,this.scoreLabel.x=(this.score.x+15)*t,this.scoreLabel.y=(this.score.y+6)*t),this.scoreLabel.fontSize=Math.floor(38*t)),this.health&&this.health.length)if(h=this.health[0].width,o=this.health[0].height,this.size===this.landSize)for(var n=0;n<this.health.length;n++)this.health[n].x=this.size.width/2-h/2,this.health[n].y=a/2/t-o+n*o*5/4;else for(n=0;n<this.health.length;n++)this.health[n].x=s/2/t-h+n*h*5/4,this.health[n].y=this.size.height/2-o/2},HeaderGroup.prototype.enable=function(t){if("header-option.png"===t)this.optionBg=this.addSprite("header-option-bg.png",0,0),this.optionBg.kill(),this.optionSound=this.addSprite("header-option-sound.png",0,0),this.optionSound.inputEnabled=!0,this.optionSound.input.useHandCursor=!0,this.optionBg.addChild(this.optionSound),this.optionFullscreen=this.addSprite("header-option-fullscreen.png",0,0),this.optionFullscreen.inputEnabled=!0,this.optionFullscreen.input.useHandCursor=!0,this.optionFullscreen.events.onInputDown.add(this.onFullscreen,this),this.optionBg.addChild(this.optionFullscreen),this.optionReset=this.addSprite("header-option-reset.png",0,0),this.optionReset.inputEnabled=!0,this.optionReset.input.useHandCursor=!0,this.optionBg.addChild(this.optionReset),this.optionReset.kill(),this.optionHelp=this.addSprite("header-option-help.png",0,0),this.optionHelp.kill(),this.optionHelp.inputEnabled=!0,this.optionHelp.input.useHandCursor=!0,this.optionBg.addChild(this.optionHelp),this.option=this.addSprite(t,0,0),this.option.inputEnabled=!0,this.option.input.useHandCursor=!0;else if("header-health.png"===t){this.health=[];for(var e=0;e<3;e++)this.health[e]=this.addSprite("header-health.png",0,0),this.health[e].inputEnabled=!0,this.health[e].input.useHandCursor=!0}else{var i;"header-score.png"===t||"header-time.png"===t||"header-bug.png"===t?(this.scoreTime="header-bug.png"===t?"bug":"header-time.png"===t?"time":"score-"+mainState.difficulty.toLowerCase(),this.score=this.addSprite("header-"+this.scoreTime+"-land.png",0,0),this.score.inputEnabled=!0,this.score.input.useHandCursor=!0,i={fill:"#ffffff",font:dataStorage.fontHeader},(this.scoreLabel=this.game.add.text(0,0,"",i)).anchor.set(.5,.5)):"header-exit.png"===t||"header-quack.png"===t?(this.exit=this.addSprite(t,0,0),this.exit.inputEnabled=!0,this.exit.input.useHandCursor=!0):"header-info.png"===t&&((t=this.info=this.addSprite("header-info.png",0,0)).inputEnabled=!0,t.input.useHandCursor=!0)}},HeaderGroup.prototype.onFullscreen=function(){this.game.scale.isFullScreen?(this.optionFullscreen.frame=this.optionFullscreen.spritesheetStart,this.game.scale.stopFullScreen()):(this.optionFullscreen.frame=this.optionFullscreen.spritesheetStart+1,this.game.scale.startFullScreen(!1))},HeaderGroup.prototype.showOption=function(){this.game.world.bringToTop(this),this.scoreLabel&&this.scoreLabel.bringToTop(),this.game.scale.isFullScreen?this.setTexture(this.optionFullscreen,"header-option-fullscreen-active.png"):this.setTexture(this.optionFullscreen,"header-option-fullscreen.png"),dataStorage.isAudio?this.setTexture(this.optionSound,"header-option-sound-active.png"):this.setTexture(this.optionSound,"header-option-sound.png"),this.optionBg.scale.set(0),this.optionBg.revive();this.game.add.tween(this.optionBg.scale).to({x:1,y:1},500,Phaser.Easing.Back.InOut,!0),this.game.physics&&this.game.physics.arcade&&(this.game.physics.arcade.isPaused=!0)},HeaderGroup.prototype.hideOption=function(){this.game.add.tween(this.optionBg.scale).to({x:0,y:0},500,Phaser.Easing.Back.InOut,!0).onComplete.addOnce(function(){this.optionBg.kill()},this),this.game.physics&&this.game.physics.arcade&&(this.game.physics.arcade.isPaused=!1)},HeaderGroup.prototype.select=function(t){t===this.optionSound&&(dataStorage.setAudio(!dataStorage.isAudio),dataStorage.isAudio?this.setTexture(this.optionSound,"header-option-sound-active.png"):this.setTexture(this.optionSound,"header-option-sound.png"))},HeaderGroup.prototype.setScore=function(t){this.scoreLabel.text=t},HeaderGroup.prototype.setTime=function(t){t<0&&(t=0),this.scoreLabel.text=formatTime(t)};var playPicturePuzzleState={spriteAtlas:"atlas",level:2,levelUp:0,resize:function(){var t=onResize.call(this,this.scale,{width:this.game.width,height:this.game.height});this.renderBoard(t),this.renderBg(t);t=this.boardGroup.size.width*this.boardGroup.scale.x;n=parseInt(4*Math.random()),this.dx=t/this.cols,this.dy=t/this.rows},init:function(){this.game.input.touch.preventDefault=!0,this.incorrectMove=0},preload:function(){if(this.stage.backgroundColor="#f4f4ff",this.game.forceSingleUpdate=!0,this.game.renderer.renderSession.roundPixels=!0,dataStorage.debug&&this.spriteAtlas)for(var t=this.game.cache.getFrameData(this.spriteAtlas).getFrames(),e=0;e<t.length;e++){var i=t[e].name;this.cache.checkImageKey(i)||this.game.load.image(i,"cache/"+this.spriteAtlas+"/"+i)}},create:function(){this.cache.checkSoundKey("sound-effects")?this.soundEffects=this.add.audioSprite("sound-effects"):dataStorage.isAudio=!1,this.bgGroup=new BgGroup(this.game),this.createBoard(),this.createTutorial(),this.createPopup(),this.world.mask=null,this.start(),this.effectGroup=new EffectGroup(this.game,{width:720,height:720},{width:720,height:720}),this.effectGroup.enable("sparkle"),this.game.scale.setResizeCallback(this.onResize,this),this.resize(),this.game.load.image(mainState.nextAnimal,"cache/"+mainState.nextAnimal+".png"),this.load.start()},start:function(){this.isGameOver=!1},createHeader:function(){this.headerGroup=new HeaderGroup(this.game,{width:160,height:0},{width:0,height:120}),this.headerGroup.enable("header-exit.png")},createPopup:function(){this.popupGroup=new PopupGroup(this.game,{width:this.game.width,height:this.game.height}),this.popupGroup.enable("popup-kid.png")},createTutorial:function(){this.tutorialGroup=new TutorialGroup(this.game,{width:this.game.width,height:this.game.height}),this.tutorialGroup.enable("popup-hand.png")},update:function(){var t,e,i;this.inputLockTime>=this.time.now||(this.game.input.activePointer.isDown&&this.game.input.activePointer.withinGame?(t=this.game.input.activePointer,this.tutorialGroup.visible&&(1===this.tutorialGroup.step?(this.inputLockTime=this.time.now+750,t.targetObject&&t.targetObject.sprite===this.tutorialGroup.handTarget()&&this.tutorialGroup.nextStep("HOW TO PLAY\n2 / 2\nSelect missing number.",this.controls[0],this.controlGroup)):t.targetObject&&t.targetObject.sprite===this.tutorialGroup.handTarget()&&(this.tutorialGroup.nextStep("That was tutorial.\n\nNow fill the rest."),this.tutorialGroup.hand.kill(),this.time.events.add(4*Phaser.Timer.SECOND,function(){this.tutorialGroup.hide(),this.inputLockTime=this.time.now+500},this))),this.world.mask||(this.popupGroup.visible?t.targetObject&&t.targetObject.sprite===this.popupGroup.quit?(this.inputLockTime=this.time.now+1e3,fadeOutEffect(this).onComplete.addOnce(function(){this.backToMenu()},this)):t.targetObject&&t.targetObject.sprite===this.popupGroup.dialogBg||(this.inputLockTime=this.time.now+1e3,this.popupGroup.hide()):(this.selectSprite||t.targetObject&&0<=t.targetObject.sprite.id)&&(this.selectSprite?(e=this.input.x-this.dragX,i=this.input.y-this.dragY,this.selectSprite.x=this.startX+e/this.boardGroup.scale.x,this.selectSprite.y=this.startY+i/this.boardGroup.scale.y):(this.selectSprite=t.targetObject.sprite,this.selectSprite.bringToTop(),this.dragX=this.input.x,this.dragY=this.input.y,this.startX=this.selectSprite.x,this.startY=this.selectSprite.y,dataStorage.isAudio&&this.soundEffects.play("select",.33))))):this.selectSprite&&(this.stopDrag(this.selectSprite),this.selectSprite=null))},backToMenu:function(){for(var t in this.texture=this.textureSprite=this.textureBg=this.textureBgSprite=null,this.boardTexture=null,PIXI.BaseTextureCache)delete PIXI.BaseTextureCache[t];for(var t in PIXI.TextureCache)delete PIXI.TextureCache[t];this.time.events.add(.5*Phaser.Timer.SECOND,function(){fadeOutEffect(this).onComplete.addOnce(function(){this.state.start("mainState")},this)},this)},popupHidden:function(){this.isGameOver&&this.backToMenu()},createBoard:function(){this.boardGroup=new BoardGroup(this.game,{width:720,height:720},{width:720,height:720}),this.createPuzzle()},gameOver:function(t){this.isGameOver=!0,this.time.events.add(.5*Phaser.Timer.SECOND,function(){var t;dataStorage.score>=mainState.names.length-1?dataStorage.setScore(0):dataStorage.setScore(dataStorage.score+1),t=0===this.incorrectMove?Text.great:1===this.incorrectMove?Text.good:Text.moves,t="_________________";var e=mainState.animalName+"!";0===this.incorrectMove?2<=this.levelUp?(this.levelUp=0,this.level<4&&(this.level++,t=Text.levelUp)):this.levelUp++:1===this.incorrectMove||(this.levelUp--,this.levelUp<=-1&&2<this.level&&this.level--),e+="\n[ "+t+" ]",this.popupGroup.showBanner(e,1500,this),this.inputLockTime=this.time.now+2e3,this.startTime=0},this)},showTutorial:function(t){t},createPuzzle:function(t){2===this.level?this.offset=.25:3===this.level?this.offset=1/3:4===this.level&&(this.offset=.125),this.score=0;this.cache.getImage(mainState.animal);var e,i,s,a=this.boardGroup.size.width;this.boardGroup.size.height;this.cols=this.level,this.rows=this.level,e=this.shuffle(this.cols);a*=this.boardGroup.scale.x;this.puzzleRandom||(this.puzzleRandom=0),i=this.puzzleRandom++,4<this.puzzleRandom&&(this.puzzleRandom=0),this.dx=a/this.cols,this.dy=a/this.rows;for(var h=a,o=this.make.sprite(0,0,mainState.animal),r=(this.cols,0);r<this.rows;r++)for(s=0;s<this.cols;s++){var n=parseInt(e[i][r][s]/this.cols),d=e[i][r][s]%this.cols,p=-s*this.dx,l=-r*this.dy,c=this.make.bitmapData(this.dx,this.dy);c.clear(),c.ctx.beginPath(),c.ctx.rect(0,0,c.width-1,c.height-1),c.ctx.fillStyle="#c4c4cc",c.ctx.fill(),c.draw(o,p,l,h,h),c.ctx.stroke(),(t=this.boardGroup.addBitmap(c,(d-(this.cols-1)/2)/this.cols,(n-(this.rows-1)/2)/this.rows)).inputEnabled=!0,t.input.bringToTop=!0,t.anchor.setTo(.5,.5),t.id=s+r*this.cols,t.xPos=d,t.yPos=n}},startDrag:function(t){(this.selectSprite=t).bringToTop()},stopDrag:function(t){dataStorage.isAudio&&this.soundEffects.play("select",.33);var e=1/this.cols,i=(this.boardGroup.size.width,Math.round(t.x/(this.dx/this.boardGroup.scale.x)+.5)-1),s=Math.round(t.y/(this.dy/this.boardGroup.scale.y)+.5)-1;i<0&&(i=0),i>=this.cols&&(i=this.cols-1),s<0&&(s=0),s>=this.rows&&(s=this.rows-1);var a=(i+this.cols/2-(this.cols-1)/2)/this.cols,h=(s+this.rows/2-(this.rows-1)/2)/this.rows,o=this.boardGroup.xy(a,h);this.add.tween(t).to({x:o.x,y:o.y},150,Phaser.Easing.Linear.None,!0);for(var r=!1,n=0;n<this.boardGroup.children.length;n++){var d=this.boardGroup.children[n];if(d!==t&&0<=d.xPos&&d.xPos===i&&d.yPos===s){d.xPos=t.xPos,d.yPos=t.yPos;var p=(d.xPos+this.cols/2-(this.cols-1)/2)/this.cols,l=(d.yPos+this.rows/2-(this.rows-1)/2)/this.rows,o=this.boardGroup.xy(p,l);this.add.tween(d).to({x:o.x,y:o.y},150,Phaser.Easing.Linear.None,!0),d.dx=.5+e*(d.xPos-1),d.dy=.5+e*(d.yPos-1),r=!0;break}}t.xPos=i,t.yPos=s;e=1/this.cols;t.dx=.5+e*(i-1),t.dy=.5+e*(s-1),r&&t.xPos+this.cols*t.yPos!==t.id&&this.incorrectMove++,this.checkComplete()},checkComplete:function(){for(var t=0;t<this.boardGroup.children.length;t++){var e=this.boardGroup.children[t];if(0<=e.xPos&&e.xPos+e.yPos*this.cols!==e.id)return!1}this.inputLockTime=this.time.now+1e3,this.gameOver(!0)},shuffle:function(){var t,e=this.cols;return 2===e&&(t=[[[1,2],[3,0]],[[3,0],[1,2]],[[3,0],[2,1]],[[1,3],[0,2]],[[2,0],[3,1]]]),3===e&&(t=[[[2,0,1],[4,5,3],[8,7,6]],[[7,3,6],[1,8,5],[2,0,4]],[[8,7,1],[5,2,4],[0,3,6]],[[5,7,3],[2,0,6],[4,8,1]],[[7,5,6],[8,2,0],[4,3,1]]]),4===e&&(t=[[[6,13,5,15],[14,9,12,3],[4,11,2,7],[0,10,8,1]],[[6,13,5,15],[14,9,12,3],[4,11,2,7],[0,10,8,1]],[[8,11,15,6],[2,7,13,1],[12,9,3,0],[14,4,10,5]],[[7,8,5,14],[13,15,6,9],[3,12,2,4],[10,1,0,11]],[[5,3,6,13],[15,11,4,0],[12,14,1,10],[8,7,2,9]]]),t},renderBoard:function(t){this.boardGroup.forEach(function(t){var e=(t.xPos-(this.cols-1)/2)/this.cols,i=(t.yPos-(this.rows-1)/2)/this.rows;this.boardGroup.move(t,e,i)},this);var e=this.boardGroup.size.width*t,i=this.boardGroup.size.height*t,s=this.level,a=this.level,h=e/s,o=this.boardGroup.x+this.boardGroup.size.width/2*t,r=this.boardGroup.y+this.boardGroup.size.height/2*t,n=Math.round(40*t);if(this.texture){if(this.textureSprite.x=o,this.textureSprite.y=r,this.texture.width===e&&this.texture.height===i)return;this.texture.resize(3+e+2*n,3+i+2*n)}else this.texture=this.game.make.renderTexture(s*h+3+2*n,a*h+3+2*n),this.textureSprite=this.game.add.sprite(o,r,this.texture),this.textureSprite.sendToBack(),this.textureSprite.anchor.set(.5);var d=this.game.make.graphics(0,0);d.lineStyle(1,8603438);for(r=0;r<=a;r++)d.moveTo(0,r*h),d.lineTo(s*h,r*h);for(o=0;o<=s;o++)d.moveTo(o*h,0),d.lineTo(o*h,a*h);i=makeSprite(this.game,"sudoku-bg.png",0,0);i.scale.set(t),this.texture.renderXY(i,0,0,!0),this.boardTexture=d.generateTexture(),d.destroy();i=this.game.make.sprite(0,0,this.boardTexture);this.texture.renderXY(i,n,n,!1)},renderBg:function(t){var e=this.game.width,i=this.game.height,s=e/2,a=i/2;if(this.textureBg){if(this.textureBgSprite.x=s,this.textureBgSprite.y=a,this.textureBg.width===e&&this.textureBg.height===i)return;this.textureBg.resize(e,i)}else this.textureBg=this.game.add.renderTexture(e,i),this.textureBgSprite=this.game.add.sprite(s,a,this.textureBg),this.textureBgSprite.sendToBack(),this.textureBgSprite.anchor.set(.5);var h=this.game.make.bitmapData(e,i/2);h.clear();s=h.ctx.createLinearGradient(0,0,0,h.height);s.addColorStop(0,"#f1e5e5"),s.addColorStop(.5,"#f1e5e5"),s.addColorStop(1,"#c8dff1"),h.ctx.fillStyle=s,h.ctx.fillRect(0,0,e,i/2),a=this.game.make.sprite(0,0,h),this.textureBg.renderXY(a,0,0,!0),(h=this.game.make.bitmapData(e,i/2)).smoothed=!1,h.clear(),(s=h.ctx.createLinearGradient(0,0,0,h.height)).addColorStop(0,"#c8dff1"),s.addColorStop(.5,"#ffffff"),s.addColorStop(1,"#c8dff1"),h.ctx.fillStyle=s,h.ctx.fillRect(0,0,e,i/2),a=this.game.make.sprite(0,0,h),this.textureBg.renderXY(a,0,i/2);h=0,a=makeSprite(this.game,"bg-top.png",0,0);a.scale.set(t),a.width=e,h=a.height,this.textureBg.renderXY(a,0,0),(a=makeSprite(this.game,"bg-top-below.png",0,0)).anchor.set(.5,0),a.scale.set(t),this.textureBg.renderXY(a,e/2,h),(a=makeSprite(this.game,"bg-grass.png",0,0)).scale.set(t),a.width=e,h=i-a.height,this.textureBg.renderXY(a,0,i-a.height)},shutdown:function(){this.cache.removeImage(mainState.animal)}},mainState={name:"mainState",spriteAtlas:"atlas",goal:"Play time.",playAction:0,names:["duck-312099","elephant-151076","chicken-48509","african-buffalo-35325","bald-eagle-309003","bear-48555","cat-153308","monkey-37394","chicken-306110","dino-307721","dog-304206","pig-304317","frog-159002","ghost-35852","hippo-308772","milk-cow-297483","dinosaur-37796","cat-153953","monkey-474147","penguin-305574","pig-303632","rabbit-23172","rabbit-30479","sheep-47527","monkey-47934","teddy-bear-304324","tiger-308768","zebra-470305"],resize:function(){var t=this.game.width,e=this.game.height,e=onResize.call(this,this.scale,{width:t,height:e});this.renderBg(e),this.effectGroup&&this.effectGroup.snowing&&(this.effectGroup.snowing.x=this.game.width/2/e,this.effectGroup.snowing.y=-32,this.effectGroup.snowing.width=this.game.width)},init:function(){this.game.input.touch.preventDefault=!1,this.score=0,this.tutorialShown||0!==dataStorage.score||(this.tutorialShown=!0),this.animal=this.names[dataStorage.score],dataStorage.score>=this.names.length-1?this.nextAnimal=this.names[0]:this.nextAnimal=this.names[dataStorage.score+1],this.animalName=this.animal.substr(0,this.animal.indexOf("-")).capitalize(),"Milk"===this.animalName&&(this.animalName="Cow"),"African"===this.animalName&&(this.animalName="Gnu"),"Bald"===this.animalName&&(this.animalName="Eagle")},preload:function(){if(this.game.renderer.clearBeforeRender=!1,dataStorage.debug&&this.spriteAtlas)for(var t=this.game.cache.getFrameData(this.spriteAtlas).getFrames(),e=0;e<t.length;e++){var i=t[e].name;this.cache.checkImageKey(i)||this.game.load.image(i,"cache/"+this.spriteAtlas+"/"+i)}this.game.load.image(this.animal,"cache/"+this.animal+".png")},peek:function(){var t=this.rnd.integerInRange(0,this.peekSpot.length-1);this.play=this.peekSpot[t];var t=this.play.width/2,e=Math.cos(this.play.rotation-Math.PI/2)*t,i=Math.sin(this.play.rotation-Math.PI/2)*t;this.add.tween(this.play).to({x:this.play.x+e,y:this.play.y+i},1e3,Phaser.Easing.Quadratic.InOut,!0),this.play.revive(),this.time.events.add(2e3,function(){this.add.tween(this.play).to({x:this.play.x-e,y:this.play.y-i},1e3,Phaser.Easing.Quadratic.InOut,!0).onComplete.add(function(){this.play.kill(),this.peek()},this)},this)},setupWorld:function(){this.peekSpot=[];var t=this.animal,e=this.boardGroup.addSpriteFromFile(t,.1,.315);this.peekSpot.push(e),e.scale.set(.1),e.angle=0,e.inputEnabled=!0,e.input.useHandCursor=!0,e.kill();e=this.boardGroup.addSpriteFromFile(t,.35,.06);this.peekSpot.push(e),e.scale.set(.1),e.angle=90,e.inputEnabled=!0,e.input.useHandCursor=!0,e.kill();e=this.boardGroup.addSpriteFromFile(t,-.295,.1);this.peekSpot.push(e),e.scale.set(.15),e.angle=-45,e.inputEnabled=!0,e.input.useHandCursor=!0,e.kill();e=this.boardGroup.addSpriteFromFile(t,-.26,.1);this.peekSpot.push(e),e.scale.set(.15),e.angle=45,e.inputEnabled=!0,e.input.useHandCursor=!0,e.kill(),this.peek()},create:function(){this.cache.checkSoundKey("sound-effects")?this.soundEffects=this.add.audioSprite("sound-effects"):dataStorage.isAudio=!1,this.bgGroup=new BgGroup(this.game),this.boardGroup=new BoardGroup(this.game,{width:720,height:720},{width:720,height:720}),this.setupWorld(),this.boardGroup.addSprite("main-tree.png",-.25,.05),this.boardGroup.addSprite("main-iglu.png",.2,0),this.boardGroup.addSprite("main-fence.png",.1,.25),this.effectGroup=new EffectGroup(this.game,{width:720,height:720},{width:720,height:720}),this.effectGroup.enable("snowing"),this.effectGroup.rain=!0,this.world.mask=null,this.createHeader(),this.createPopup(),this.game.scale.setResizeCallback(this.onResize,this),this.resize(),this.start(),this.music},createHeader:function(){this.headerGroup=new HeaderGroup(this.game,{width:150,height:0,maxHeight:1200},{width:0,height:90,maxWidth:1200})},createPopup:function(){},updateProgress:function(){},update:function(){if(!(this.inputLockTime>=this.time.now)&&this.game.input.activePointer.isDown&&this.game.input.activePointer.withinGame){var t=this.game.input.activePointer;if(!this.world.mask){if(!this.popupGroup||!this.popupGroup.visible)return t.targetObject&&t.targetObject.sprite===this.headerGroup.info?(this.inputLockTime=this.time.now+500,void(dataStorage.score<30&&this.popupGroup.showDialog(playState.goal,null,this,!0))):t.targetObject&&t.targetObject.sprite===this.next?(this.inputLockTime=this.time.now+500,void this.showAchievement(!1)):t.targetObject&&t.targetObject.sprite===this.headerGroup.option?(this.inputLockTime=this.time.now+500,void this.headerGroup.showOption(this)):t.targetObject&&t.targetObject.sprite===this.headerGroup.exit?(this.inputLockTime=this.time.now+750,void(window.location.href=dataStorage.URL)):t.targetObject&&t.targetObject.sprite===this.headerGroup.score?(this.inputLockTime=this.time.now+500,void this.popupGroup.showBanner(this.goal,5e3,this)):void(t.targetObject&&t.targetObject.sprite===this.play&&(this.inputLockTime=this.time.now+1e3,this.popupHidden(),fadeOutEffect(this).onComplete.addOnce(function(){this.state.add("playPicturePuzzleState",playPicturePuzzleState,!0)},this)));t.targetObject&&t.targetObject.sprite===this.popupGroup.play?(this.inputLockTime=this.time.now+1e3,this.popupHidden(),fadeOutEffect(this).onComplete.addOnce(function(){this.state.add("playPicturePuzzleState",playPicturePuzzleState,!0)},this)):t.targetObject&&t.targetObject.sprite===this.popupGroup.dialogBg||(this.inputLockTime=this.time.now+1e3,this.popupGroup.hide())}}},showAchievement:function(t){var e;if(t){if((e=playService.showAchievements(3)).length<=0)return}else(e=playService.getAchievements("REVEALED",3)).length<=0&&e.push({title:"Congratulations",text:"You have achieved everything!"});var i="";e.forEach(function(t){i+=t.title+": "+t.text+"\n"}),this.popupGroup.showDialog(i,null,this,!0,!1,"Achievements",t)},start:function(){this.world.mask=null,loadInProgress=!1,loginInProgress||leadManager.preloaded||playService.showLogin(),this.updateProgress(),this.started=!0},popupHidden:function(){},updateScore:function(t){this.updateProgress(),this.setupWorld()},renderBg:function(t){var e=this.game.width,i=this.game.height,s=e/2,a=i/2;if(this.textureBg){if(this.textureBgSprite.x=s,this.textureBgSprite.y=a,this.textureBg.width===e&&this.textureBg.height===i)return;this.textureBg.resize(e,i)}else this.textureBg=this.game.make.renderTexture(e,i),this.textureBgSprite=this.game.add.sprite(s,a,this.textureBg),this.textureBgSprite.sendToBack(),this.textureBgSprite.anchor.set(.5);var h=this.game.make.bitmapData(e,i/2);h.smoothed=!1,h.clear();s=h.ctx.createLinearGradient(0,0,0,h.height);s.addColorStop(0,"#f1e5e5"),s.addColorStop(.5,"#f1e5e5"),s.addColorStop(1,"#2244ff"),h.ctx.fillStyle=s,h.ctx.fillRect(0,0,e,i/2),a=this.game.make.sprite(0,0,h),this.textureBg.renderXY(a,0,0,!0),(h=this.game.make.bitmapData(e,i/2)).smoothed=!1,h.clear(),(s=h.ctx.createLinearGradient(0,0,0,h.height)).addColorStop(0,"#c8dff1"),s.addColorStop(.5,"#ffffff"),s.addColorStop(1,"#c8dff1"),h.ctx.fillStyle=s,h.ctx.fillRect(0,0,e,i/2),a=this.game.make.sprite(0,0,h),this.textureBg.renderXY(a,0,i/2),(a=makeSprite(this.game,"bg-hill.png",0,0)).scale.set(t),a.scale.x=-a.scale.x,this.textureBg.renderXY(a,e,i/2-a.height/2),a.scale.x=-a.scale.x,this.textureBg.renderXY(a,0,i/2-a.height/3),(a=makeSprite(this.game,"bg-hill.png",0,0)).scale.set(t),this.textureBg.renderXY(a,e,i/2);h=0;(a=makeSprite(this.game,"bg-top.png",0,0)).scale.set(t),a.width=e,h=a.height,this.textureBg.renderXY(a,0,0),(a=makeSprite(this.game,"bg-top-below.png",0,0)).anchor.set(.5,0),a.scale.set(t),this.textureBg.renderXY(a,e/2,h),(a=makeSprite(this.game,"bg-grass.png",0,0)).scale.set(t),a.width=e,h=i-a.height,this.textureBg.renderXY(a,0,i-a.height)},shutdown:function(){this.textureBg=this.textureBgSprite=null},loadComplete:function(){this.time.events.add(Phaser.Timer.SECOND,function(){dataStorage.isAudio&&(this.music=this.game.add.audio("music-1",.2),this.music.play())},this)},printCache:function(t){var e,i="";for(e in this.cache.getKeys(t))i+=e+" ";console.log(t+":"+i)},showPhaserCache:function(){this.printCache(Phaser.Cache.CANVAS),this.printCache(Phaser.Cache.IMAGE),this.printCache(Phaser.Cache.TEXTURE),this.printCache(Phaser.Cache.SOUND),this.printCache(Phaser.Cache.TEXT),this.printCache(Phaser.Cache.PHYSICS),this.printCache(Phaser.Cache.TILEMAP),this.printCache(Phaser.Cache.BINARY),this.printCache(Phaser.Cache.BITMAPDATA),this.printCache(Phaser.Cache.BITMAPFONT),this.printCache(Phaser.Cache.JSON),this.printCache(Phaser.Cache.XML)},showPixiCache:function(){var t,e="";for(t in PIXI.BaseTextureCache)e+=t+" ";for(t in console.log("PIXI BaseTextureCache: "+e),e="",PIXI.TextureCache)e+=t+" ";console.log("PIXI TextureCache: "+e)},showCache:function(t){console.log(t),this.showPhaserCache(),this.showPixiCache()}},Text={i:0,loading:"Loading",audio:"Sounds",youFound:"You found",levelUp:"LEVEL UP!",great:"",good:"",moves:"",fi:function(){this.i=1,this.lang="fi",this.loading="Ladataan",this.audio="Äänet",this.youFound="Se on",this.levelUp="TASO YLÖS!",this.great="",this.good="",this.moves=""}},bootState={config:{},name:"bootState",spriteAtlas:"atlas",fullscreen:!0,audio:!0,resize:function(){onResize.call(this,this.scale,{width:this.game.width,height:this.game.height})},init:function(){"fi"===document.getElementsByTagName("html")[0].getAttribute("lang")&&Text.fi(),Phaser.Plugin.Debug},preload:function(){Phaser.Canvas.setTouchAction(game.canvas,"auto"),this.game.input.touch.preventDefault=!1,-1===window.location.href.indexOf("localhost:8383")&&(this.load.path="/picturepuzzle-kids/"),this.game.forceSingleUpdate=!0,this.game.renderer.renderSession.roundPixels=!0,this.stage.smoothed=!0,this.stage.backgroundColor="#f7fbfd",this.scale.scaleMode=Phaser.ScaleManager.RESIZE,this.scale.fullScreenScaleMode=Phaser.ScaleManager.RESIZE,this.scale.setShowAll(),this.scale.refresh()},onFullscreen:function(){var t=this.game.scale.isFullScreen?(this.game.scale.stopFullScreen(),"OFF"):(this.game.scale.startFullScreen(!1),"ON");this.fullscreenText.text="Fullscreen\n"+t},loadComplete:function(){if(this.loadText.kill(),this.audioText.revive(),this.audioText.inputEnabled=!0,this.audioText.input.useHandCursor=!0,this.game.device.fullscreen,this.playBg=this.boardGroup.addSprite("main-play-bg.png",0,.15),this.add.tween(this.playBg.scale).to({x:.95,y:.9},500,Phaser.Easing.Sinusoidal.In,!0).repeat(Number.MAX_VALUE).yoyo(!0),this.add.tween(this.playBg).to({angle:360},1e4,Phaser.Easing.Linear.None,!0).repeat(Number.MAX_VALUE),this.play=this.boardGroup.addSprite("main-play.png",0,.15),this.play.inputEnabled=!0,this.play.input.useHandCursor=!0,dataStorage.debug&&this.spriteAtlas)for(var t=this.game.cache.getFrameData(this.spriteAtlas).getFrames(),e=0;e<t.length;e++){var i=t[e].name;this.cache.checkImageKey(i)||this.game.load.image(i,"cache/"+this.spriteAtlas+"/"+i)}},create:function(){this.input.maxPointers=1,this.boardGroup=new BoardGroup(this.game,{width:640,height:720},{width:640,height:720}),this.boardGroup.addText("",0,.28,"c98dd0",72),this.gameQuack=this.boardGroup.addText("GameQuack.com",0,.37,"98a1c1",48),this.gameQuack.kill(),this.loadText=this.boardGroup.addText(Text.loading+"...",0,.15,"666666",32),this.audioText=this.boardGroup.addText(Text.audio+"\n"+(dataStorage.isAudio?"ON":"OFF"),-.25,.16,"666666",32),this.audioText.align="center",this.audioText.kill(),this.fullscreenText=this.boardGroup.addText(Text.fullscreen+"\nOFF",.25,.16,"666666",32),this.fullscreenText.align="center",this.fullscreenText.kill(),this.load.spritesheet("quack.png","cache/quack.png",380,380),this.moreGames=this.boardGroup.addText("Please find our games HERE!",0,.425,"98a1c1",24),this.moreGames.kill(),dataStorage.debug&&(this.load.image("main-play-bg.png","cache/atlas/main-play-bg.png"),this.load.image("main-play.png","cache/atlas/main-play.png"));mainState.animal=mainState.names[dataStorage.score],this.game.load.image(mainState.animal,"cache/"+mainState.animal+".png"),this.load.audiosprite("sound-effects",["cache/sound-effects.ogg","cache/sound-effects.mp3"],null,{spritemap:{select:{start:0,end:.039}}}),this.time.events.add(10,function(){this.load.atlasXML("atlas","cache/atlas/sprites.png","cache/atlas/sprites.xml"),this.load.onFileComplete.add(this.fileComplete,this),this.load.onLoadComplete.addOnce(this.loadComplete,this),this.load.start()},this),this.game.scale.setResizeCallback(this.onResize,this),this.resize()},fileComplete:function(t,e,i,s,a){this.loadText.setText("Loading "+t+" %"),i&&"quack.png"===e&&this.boardGroup.addSpriteFromFile(e,0,-.2)},update:function(){var t;this.inputLockTime>=this.time.now||this.game.input.activePointer.isDown&&this.game.input.activePointer.withinGame&&(t=this.game.input.activePointer,this.world.mask||(!t.targetObject||t.targetObject.sprite!==this.gameQuack&&t.targetObject.sprite!==this.moreGames||(this.inputLockTime=this.time.now+250,window.location.assign("//gamequack.com")),t.targetObject&&t.targetObject.sprite===this.audioText&&(this.inputLockTime=this.time.now+250,dataStorage.setAudio(!dataStorage.isAudio),this.audioText.text=Text.audio+"\n"+(dataStorage.isAudio?"ON":"OFF")),t.targetObject&&t.targetObject.sprite===this.play&&(this.inputLockTime=this.time.now+1e3,fadeOutEffect(this).onComplete.addOnce(function(){this.state.add("mainState",mainState,!0)},this))))},shutdown:function(){}};function createGame(){var t=window;0===t.innerWidth&&(t.innerWidth=480),0===t.innerHeight&&(t.innerHeight=480);t={width:t.innerWidth,height:t.innerHeight},t=new Phaser.Game(t.width,t.height,Phaser.CANVAS,"canvas");(window.game=t).state.add("bootState",bootState,!0)}
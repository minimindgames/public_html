/*! Copyright sudokusolver 16-03-2023 */

var gridCell,numberCell,lockInput=!1;function allNumbers(){let e=document.getElementsByClassName("cell"),t=[0,0,0,0,0,0,0,0,0,0];for(let l=0;l<e.length;l++)e[l].innerHTML&&t[parseInt(e[l].innerHTML)-1]++;let l=document.getElementsByClassName("number"),n=0;for(let e=0;e<l.length;e++)9===t[e]?(n++,l[e].style.backgroundColor="lightgray"):l[e].style.backgroundColor="white";9===n&&(l[9].style.backgroundColor="lightgray");for(let e=0;e<l.length-1;e++)l[e].children[1].innerHTML=9-parseInt(t[e])}function isValidNumber(e,t){let l,n=document.getElementsByClassName("cell");for(let t=0;t<n.length;t++)if(e===n[t]){l=t;break}let o=Math.trunc(l/9),r=l%3+o%3*3,i=3*Math.trunc(l/27)+Math.trunc(l%9/3),u=[],a=[];for(let l=0;l<n.length;l++){if(!t&&n[l].innerHTML===e.innerHTML){a.push(n[l]);continue}if(e===n[l])continue;let s=Math.trunc(l/9),c=l%3+s%3*3,d=3*Math.trunc(l/27)+Math.trunc(l%9/3);o!==s&&r!==c&&i!==d||(t?n[l].innerHTML===t&&u.push(n[l]):u.push(n[l]))}for(let e=0;e<u.length;e++)u[e].style.highlight=u[e].style.backgroundColor,u[e].style.backgroundColor=t?"red":"lightgray";for(let e=0;e<a.length;e++)a[e].style.highlight=a[e].style.backgroundColor,a[e].style.backgroundColor="red";return(u.length>0||a.length>0)&&(lockInput=!0,window.setTimeout(()=>{lockInput=!1;for(let e=0;e<u.length;e++)u[e].style.backgroundColor=u[e].style.highlight;for(let e=0;e<a.length;e++)a[e].style.backgroundColor=a[e].style.highlight},1e3)),0===u.length&&0===a.length}function isSudokuSolved(e){let t=document.getElementsByClassName("cell");if(e){let e=[];for(var l=0;l<t.length;l++){var n=t[l];e.push(n.clueNumber||"lightyellow"===n.style.backgroundColor?"":n.innerHTML)}try{localStorage.setItem("sudoku-"+window.puzzleNumber,e.join(","))}catch(e){console.log(e)}}return e&&(window.setTimeout(()=>{solveSudoku()},1e3),updateDesc(1)),!1}function isValid(e,t,l,n){for(let o=0;o<9;o++){const r=3*Math.floor(t/3)+Math.floor(o/3),i=3*Math.floor(l/3)+o%3;if(e[t][o]===n||e[o][l]===n||e[r][i]===n)return!1}return!0}var solutionBoard,solutions=0;function trySolve(e){for(let t=0;t<9;t++)for(let l=0;l<9;l++)if(0===e[t][l]){for(let n=1;n<=9;n++)if(isValid(e,t,l,n)){if(e[t][l]=n,trySolve(e))return!0;e[t][l]=0}return!1}if(++solutions>1)return!0;solutionBoard=[];for(let t=0;t<9;t++){solutionBoard[t]=[];for(let l=0;l<9;l++)solutionBoard[t][l]=e[t][l]}return!1}var candidates=document.getElementsByClassName("cell");function solveSudoku(){let e=[];for(let t=0;t<9;t++)e[t]=[];for(let t=0;t<candidates.length;t++){let l=t%3+Math.trunc(t/9)%3*3;e[3*Math.trunc(t/27)+Math.trunc(t%9/3)][l]=parseInt(candidates[t].innerHTML)||0}solutions=0;let t;trySolve(e);if(1===solutions){for(let e=0;e<candidates.length;e++){let t=e%3+Math.trunc(e/9)%3*3,l=3*Math.trunc(e/27)+Math.trunc(e%9/3);""===candidates[e].innerHTML&&(candidates[e].innerHTML=solutionBoard[l][t],candidates[e].style.backgroundColor="lightyellow")}t=2}else t=solutions>1?3:4;updateDesc(t)}function onCellClick(){lockInput||this!==gridCell&&(gridCell&&(0===gridCell.clueNumber?this.clueNumber:gridCell.style.backgroundColor="lightgray"),0===this.clueNumber?(gridCell&&(gridCell.style.backgroundColor="white"),(gridCell=this).style.backgroundColor="lightblue"):isValidNumber(this))}function onNumberClick(){if(!lockInput&&gridCell&&(numberCell=null,"lightgray"!==gridCell.style.backgroundColor)){if(isValidNumber(gridCell,this.children[0].innerHTML)){for(let e=0;e<candidates.length;e++)"lightyellow"===candidates[e].style.backgroundColor&&(candidates[e].style.backgroundColor="white",candidates[e].innerHTML="");"□"===this.children[0].innerHTML?(gridCell.innerHTML="",numberCell=this):(gridCell.innerHTML=this.children[0].innerHTML,numberCell=this),this.style.backgroundColor="lightblue"}else numberCell=this,this.style.backgroundColor="lightblue";lockInput=!0,window.setTimeout(()=>{isSudokuSolved(!0)||(lockInput=!1),numberCell.style.backgroundColor="white"},700)}}function updateDesc(e){let t,l=document.getElementById("author");t=-1!==window.location.href.indexOf("/en/")?["Enter clue numbers","Trying to solve","One correct solution!","Many solutions","No correct solution"]:["Syötä vihjenumerot","Etsitään ratkaisua","Yksi oikea ratkaisu!","Monta ratkaisua","Ei oikeaa ratkaisua"],l.innerHTML=t[e]}function doShare(){navigator.share({url:"https://minimindgames.com/fi/supersudoku/",text:"Sudoku"})}window.onload=function(){screenLock=getScreenLock();for(var e=document.getElementsByClassName("cell"),t=0;t<e.length;t++){e[t].onclick=onCellClick}let l=document.getElementsByClassName("number");for(let e=0;e<l.length;e++){l[e].onclick=onNumberClick}new Date;window.puzzleNumber=0;for(let t=0;t<81;t++){let l=e[t];l.clueNumber=0,l.innerHTML=l.clueNumber||"",l.clueNumber||(gridCell?gridCell!==l&&(l.style.backgroundColor="white"):(gridCell=l).style.backgroundColor="lightblue")}try{let t=localStorage.getItem("sudoku-"+window.puzzleNumber);if(t){let l=t.split(",");for(let t=0;t<l.length;t++)l[t]&&(e[t].innerHTML=l[t]);isSudokuSolved(!1)&&(lockInput=!0)}}catch(e){console.log(e)}solveSudoku()};let name,text,sudokuPuzzle=document.getElementById("sudokuPuzzleNo"),d=new Date,share=document.getElementById("share"),e=document.getElementById("author");function isScreenLockSupported(){return"wakeLock"in navigator}var screenLock;function getScreenLock(){if(isScreenLockSupported()){let e;try{e=navigator.wakeLock.request("screen")}catch(e){console.log(e.name,e.message)}return e}}-1!==window.location.href.indexOf("/en/")?(name="Sudoku solver",text="Share solver"):(name="Sudoku ratkaisija",text="Jaa ratkaisija"),sudokuPuzzle.innerHTML=name,share.innerHTML=text,share.onclick=doShare,share.style.backgroundColor="greenyellow",share.style.color="black",share.style.cursor="pointer",document.addEventListener("visibilitychange",()=>{null!==screenLock&&"visible"===document.visibilityState&&(screenLock=getScreenLock())}),document.oncontextmenu=function(){return!1};